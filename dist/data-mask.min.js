!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.DataMasker=i()}(this,function(){function t(t){return null!==t&&"string"==typeof t}function i(t){return null!==t&&"function"==typeof t}function n(t){return null!==t&&"number"==typeof t&&!isNaN(t)&&isFinite(t)}function s(t,i){return Array(i+1).join(t)}function r(t){for(var i=new Array(t),n=0;t>n;n++)i[n]=n;return i}function a(t){for(var i,n,s=r(t),a=s.length;0!==a;)n=Math.floor(Math.random()*a),a-=1,i=s[a],s[a]=s[n],s[n]=i;return s}function o(i,n){return t(n)?i.split(n):i.match(new RegExp(".{1,"+Math.floor(n)+"}","g"))}function e(t,i,n,r){if(0===n)return t;if(t.length-n<=0)return s(i,t.length);if(r===p)return s(i,n)+t.substr(n);if(r===k)return t.substr(0,t.length-n)+s(i,n);for(var o="",e=a(t.length).slice(0,n),u=0;u<t.length;u++)o+=e.indexOf(u)>-1?i:t[u];return o}function u(t,i,n,s,r,a,o){var e={range:i,deliminator:n,maskChar:s,direction:r,beforeMask:a,afterMask:o};return new c(t,e).mask(i,n,s,r,a,o)}var h="*",f=" ",m=0,k=-1,l=0,p=1,c=function(){function s(i,n){this.maskSource=t(i)?i:"",this.buildParams(n)}return s.prototype.isValidMaskChar=function(i){return t(i)&&1===i.length},s.prototype.isValidDeliminator=function(i){return t(i)&&i.length>0||n(i)&&i>0},s.prototype.isValidRange=function(t){return null!==t&&""!==t&&t>=0&&!isNaN(t)&&isFinite(t)},s.prototype.isValidMaskDirection=function(t){return[k,l,p].indexOf(t)>-1},s.prototype.buildParams=function(t){this.maskOptions=t||{},this.maskOptions.maskChar=this.isValidMaskChar(this.maskOptions.maskChar)?this.maskOptions.maskChar:h,this.maskOptions.deliminator=this.isValidDeliminator(this.maskOptions.deliminator)?this.maskOptions.deliminator:f,this.maskOptions.range=this.isValidRange(this.maskOptions.range)?this.maskOptions.range:m,this.maskOptions.direction=this.isValidMaskDirection(this.maskOptions.direction)?this.maskOptions.direction:p,this.maskOptions.beforeMask=i(this.maskOptions.beforeMask)?this.maskOptions.beforeMask:null,this.maskOptions.afterMask=i(this.maskOptions.afterMask)?this.maskOptions.afterMask:null},s.prototype.mask=function(n,s,r,a,u,h){for(var f=this.isValidMaskChar(r)?r:this.maskOptions.maskChar,k=this.isValidDeliminator(s)?s:this.maskOptions.deliminator,l=this.isValidRange(n)?n:this.maskOptions.range,p=this.isValidMaskDirection(a)?a:this.maskOptions.direction,c=i(u)?u:this.maskOptions.beforeMask,d=i(h)?h:this.maskOptions.afterMask,O=null!==c,g=null!==d,M=o(this.maskSource,k),y=new Array(M.length),V=null,b=t(k)?k:"",C=0;C<M.length;C++){var R=0;0!==M[C].length?(R=l===m?Math.floor(1e6*Math.random())%M[C].length+1:1>l?Math.floor(l*M[C].length):Math.floor(l),V=M[C],O&&(V=c(V,R,f,p),V===!1)?y[C]=M[C]:(V=e(V,f,R,p),g&&(V=d(V,R,f,p),V===!1)?y[C]="":y[C]=V)):y.push(M[C])}return y.join(b)},s.mask=function(t,i,n,s,r,a,o){return u(t,i,n,s,r,a,o)},s.prototype.maskLeft=function(t,i,n,s,r){return this.mask(t,i,n,p,s,r)},s.maskLeft=function(t,i,n,s,r,a){return u(t,i,n,s,p,r,a)},s.prototype.maskRight=function(t,i,n,s,r){return this.mask(t,i,n,k,s,r)},s.maskRight=function(t,i,n,s,r,a){return u(t,i,n,s,k,r,a)},s.prototype.maskRandom=function(t,i,n,s,r){return this.mask(t,i,n,l,s,r)},s.maskRandom=function(t,i,n,s,r,a){return u(t,i,n,s,l,r,a)},s}();return c});
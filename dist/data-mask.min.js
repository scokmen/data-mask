!function(t,i){"use strict";"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.DataMasker=i()}(this,function(){"use strict";var a=-1,e=0,u=1,i=u;function v(t){return null!==t&&"string"==typeof t}function D(t){return null!==t&&"function"==typeof t}function n(t){return null!==t&&"number"==typeof t&&!isNaN(t)&&isFinite(t)}function h(t,i){return new Array(i+1).join(t)}function f(t){for(var i,n,o=function(t){for(var i=new Array(t),n=0;n<t;n++)i[n]=n;return i}(t),r=o.length;0!==r;)n=Math.floor(Math.random()*r),i=o[r-=1],o[r]=o[n],o[n]=i;return o}function C(t,i,n,o){if(0===n)return t;if(t.length-n<=0)return h(i,t.length);if(o===u)return h(i,n)+t.substr(n);if(o===a)return t.substr(0,t.length-n)+h(i,n);for(var r="",s=f(t.length).slice(0,n),e=0;e<t.length;e++)-1<s.indexOf(e)?r+=i:r+=t[e];return r}function l(t,i,n,o,r,s,e){return new p(t,{count:i,deliminator:n,char:o,direction:r,beforeMask:s,afterMask:e}).mask(i,n,o,r,s,e)}var p=function(){function t(t,i){this.source=v(t)?t:"",this.buildParams(i)}return t.prototype.isValidChar=function(t){return v(t)&&1===t.length},t.prototype.isValidDeliminator=function(t){return v(t)&&0<t.length||n(t)&&0<t},t.prototype.isValidCount=function(t){return n(t)&&0<=t},t.prototype.isValidDirection=function(t){return-1<[a,e,u].indexOf(t)},t.prototype.buildParams=function(t){this.options=t||{},this.options.char=this.isValidChar(this.options.char)?this.options.char:"*",this.options.deliminator=this.isValidDeliminator(this.options.deliminator)?this.options.deliminator:" ",this.options.count=this.isValidCount(this.options.count)?this.options.count:0,this.options.direction=this.isValidDirection(this.options.direction)?this.options.direction:i,this.options.mask=v(this.options.mask)?this.options.mask:null,this.options.beforeMask=D(this.options.beforeMask)?this.options.beforeMask:null,this.options.afterMask=D(this.options.afterMask)?this.options.afterMask:null},t.prototype.mask=function(t,i,n,o,r,s){for(var e,a,u=this.isValidChar(n)?n:this.options.char,h=this.isValidDeliminator(i)?i:this.options.deliminator,f=this.isValidCount(t)?t:this.options.count,l=this.isValidDirection(o)?o:this.options.direction,p=D(r)?r:this.options.beforeMask,c=D(s)?s:this.options.afterMask,d=null!==p,m=null!==c,k=(e=this.source,v(a=h)?e.split(a):e.match(new RegExp(".{1,"+Math.floor(a)+"}","g"))),M=new Array(k.length),g=null,y=v(h)?h:"",b=0;b<k.length;b++){var V=0;0!==k[b].length?(V=0===f?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)%k[b].length+1:f<1?Math.floor(f*k[b].length):Math.floor(f),g=k[b],d&&!1===(g=p(g,V,u,l,b))?M[b]=k[b]:(g=C(g,u,V,l),m&&!1===(g=c(g,V,u,l,b))?M[b]="":M[b]=g)):M.push(k[b])}return M.join(y)},t.mask=function(t,i,n,o,r,s,e){return l(t,i,n,o,r,s,e)},t.prototype.maskLeft=function(t,i,n,o,r){return this.mask(t,i,n,u,o,r)},t.maskLeft=function(t,i,n,o,r,s){return l(t,i,n,o,u,r,s)},t.prototype.maskRight=function(t,i,n,o,r){return this.mask(t,i,n,a,o,r)},t.maskRight=function(t,i,n,o,r,s){return l(t,i,n,o,a,r,s)},t.prototype.maskRandom=function(t,i,n,o,r){return this.mask(t,i,n,e,o,r)},t.maskRandom=function(t,i,n,o,r,s){return l(t,i,n,o,e,r,s)},t}();return p});
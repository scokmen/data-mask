!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.DataMasker=n()}(this,function(){function t(t){return null!==t&&"string"==typeof t}function n(t){return null!==t&&"function"==typeof t}function i(t){return null!==t&&"number"==typeof t&&!isNaN(t)&&isFinite(t)}function s(t,n){return Array(n+1).join(t)}function r(t){for(var n=new Array(t),i=0;t>i;i++)n[i]=i;return n}function a(t){for(var n,i,s=r(t),a=s.length;0!==a;)i=Math.floor(Math.random()*a),a-=1,n=s[a],s[a]=s[i],s[i]=n;return s}function e(n,i){return t(i)?n.split(i):n.match(new RegExp(".{1,"+Math.floor(i)+"}","g"))}function o(t,n,i,r){if(0===i)return t;if(t.length-i<=0)return s(n,t.length);if(r===p)return s(n,i)+t.substr(i);if(r===m)return t.substr(0,t.length-i)+s(n,i);for(var e="",o=a(t.length).slice(0,i),u=0;u<t.length;u++)e+=o.indexOf(u)>-1?n:t[u];return e}function u(t,n,i,s,r,a,e){var o={range:n,deliminator:i,maskChar:s,direction:r,beforeMask:a,afterMask:e};return new c(t,o).mask(n,i,s,r,a,e)}var h="*",f=" ",l=0,m=-1,k=0,p=1,c=function(){function s(n,i){this.maskSource=t(n)?n:"",this.buildParams(i)}return s.prototype.isValidMaskChar=function(n){return t(n)&&1===n.length},s.prototype.isValidDeliminator=function(n){return t(n)&&n.length>0||i(n)&&n>0},s.prototype.isValidRange=function(t){return null!==t&&""!==t&&t>=0&&!isNaN(t)&&isFinite(t)},s.prototype.isValidMaskDirection=function(t){return[m,k,p].indexOf(t)>-1},s.prototype.buildParams=function(t){this.maskOptions=t||{},this.maskOptions.maskChar=this.isValidMaskChar(this.maskOptions.maskChar)||h,this.maskOptions.deliminator=this.isValidDeliminator(this.maskOptions.deliminator)||f,this.maskOptions.range=this.isValidRange(this.maskOptions.range)||l,this.maskOptions.direction=this.isValidMaskDirection(this.maskOptions.direction)||p,this.maskOptions.beforeMask=n(this.maskOptions.beforeMask)||null,this.maskOptions.afterMask=n(this.maskOptions.afterMask)||null},s.prototype.mask=function(i,s,r,a,u,h){for(var f=this.isValidMaskChar(r)?r:this.maskOptions.maskChar,m=this.isValidDeliminator(s)?s:this.maskOptions.deliminator,k=this.isValidRange(i)?i:this.maskOptions.range,p=this.isValidMaskDirection(a)?a:this.maskOptions.direction,c=n(u)?u:this.maskOptions.beforeMask,d=n(h)?h:this.maskOptions.afterMask,g=null!==c,M=null!==d,O=e(this.maskSource,m),y=new Array(O.length),V=null,b=t(m)?m:"",R=0;R<O.length;R++){var v=0;0!==O[R].length?(v=k===l?Math.floor(1e6*Math.random())%O[R].length+1:1>k?Math.floor(k*O[R].length):Math.floor(k),V=O[R],g&&(V=c(V,v,f,p),V===!1)?y[R]=O[R]:(V=o(V,f,v,p),M&&(V=d(V,v,f,p),V===!1)?y[R]="":y[R]=V)):y.push(O[R])}return y.join(b)},s.mask=function(t,n,i,s,r,a,e){return u(t,n,i,s,r,a,e)},s.prototype.maskLeft=function(t,n,i,s,r){return this.mask(t,n,i,p,s,r)},s.maskLeft=function(t,n,i,s,r,a){return u(t,n,i,s,p,r,a)},s.prototype.maskRight=function(t,n,i,s,r){return this.mask(t,n,i,m,s,r)},s.maskRight=function(t,n,i,s,r,a){return u(t,n,i,s,m,r,a)},s.prototype.maskRandom=function(t,n,i,s,r){return this.mask(t,n,i,k,s,r)},s.maskRandom=function(t,n,i,s,r,a){return u(t,n,i,s,k,r,a)},s}();return c});
!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.DataMasker=i()}(this,function(){function t(t){return null!==t&&"string"==typeof t}function i(t){return null!==t&&"function"==typeof t}function n(t){return null!==t&&"number"==typeof t&&!isNaN(t)&&isFinite(t)}function o(t,i){return Array(i+1).join(t)}function r(t){for(var i=new Array(t),n=0;t>n;n++)i[n]=n;return i}function s(t){for(var i,n,o=r(t),s=o.length;0!==s;)n=Math.floor(Math.random()*s),s-=1,i=o[s],o[s]=o[n],o[n]=i;return o}function e(i,n){return t(n)?i.split(n):i.match(new RegExp(".{1,"+Math.floor(n)+"}","g"))}function a(t,i,n,r){if(0===n)return t;if(t.length-n<=0)return o(i,t.length);if(r===p)return o(i,n)+t.substr(n);if(r===f)return t.substr(0,t.length-n)+o(i,n);for(var e="",a=s(t.length).slice(0,n),u=0;u<t.length;u++)e+=a.indexOf(u)>-1?i:t[u];return e}function u(t,i,n,o,r,s,e){var a={count:i,deliminator:n,"char":o,direction:r,beforeMask:s,afterMask:e};return new M(t,a).mask(i,n,o,r,s,e)}var h=0,f=-1,l=0,p=1,c="*",d=" ",m=h,k=p,M=function(){function o(i,n){this.source=t(i)?i:"",this.buildParams(n)}return o.prototype.isValidChar=function(i){return t(i)&&1===i.length},o.prototype.isValidDeliminator=function(i){return t(i)&&i.length>0||n(i)&&i>0},o.prototype.isValidCount=function(t){return null!==t&&""!==t&&t>=0&&!isNaN(t)&&isFinite(t)},o.prototype.isValidDirection=function(t){return[f,l,p].indexOf(t)>-1},o.prototype.buildParams=function(n){this.options=n||{},this.options["char"]=this.isValidChar(this.options["char"])?this.options["char"]:c,this.options.deliminator=this.isValidDeliminator(this.options.deliminator)?this.options.deliminator:d,this.options.count=this.isValidCount(this.options.count)?this.options.count:m,this.options.direction=this.isValidDirection(this.options.direction)?this.options.direction:k,this.options.mask=t(this.options.mask)?this.options.mask:null,this.options.beforeMask=i(this.options.beforeMask)?this.options.beforeMask:null,this.options.afterMask=i(this.options.afterMask)?this.options.afterMask:null},o.prototype.mask=function(n,o,r,s,u,f){for(var l=this.isValidChar(r)?r:this.options["char"],p=this.isValidDeliminator(o)?o:this.options.deliminator,c=this.isValidCount(n)?n:this.options.count,d=this.isValidDirection(s)?s:this.options.direction,m=i(u)?u:this.options.beforeMask,k=i(f)?f:this.options.afterMask,M=null!==m,g=null!==k,y=e(this.source,p),b=new Array(y.length),V=null,v=t(p)?p:"",D=0;D<y.length;D++){var C=0;0!==y[D].length?(C=c===h?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)%y[D].length+1:1>c?Math.floor(c*y[D].length):Math.floor(c),V=y[D],M&&(V=m(V,C,l,d,D),V===!1)?b[D]=y[D]:(V=a(V,l,C,d),g&&(V=k(V,C,l,d,D),V===!1)?b[D]="":b[D]=V)):b.push(y[D])}return b.join(v)},o.mask=function(t,i,n,o,r,s,e){return u(t,i,n,o,r,s,e)},o.prototype.maskLeft=function(t,i,n,o,r){return this.mask(t,i,n,p,o,r)},o.maskLeft=function(t,i,n,o,r,s){return u(t,i,n,o,p,r,s)},o.prototype.maskRight=function(t,i,n,o,r){return this.mask(t,i,n,f,o,r)},o.maskRight=function(t,i,n,o,r,s){return u(t,i,n,o,f,r,s)},o.prototype.maskRandom=function(t,i,n,o,r){return this.mask(t,i,n,l,o,r)},o.maskRandom=function(t,i,n,o,r,s){return u(t,i,n,o,l,r,s)},o}();return M});